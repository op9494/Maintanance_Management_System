{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _objectSpread from\"@babel/runtime/helpers/objectSpread\";import invariant from\"../utils/invariant\";import getScreenForRouteName from\"./getScreenForRouteName\";import createConfigGetter from\"./createConfigGetter\";import*as NavigationActions from\"../NavigationActions\";import*as SwitchActions from\"./SwitchActions\";import*as StackActions from\"./StackActions\";import validateRouteConfigMap from\"./validateRouteConfigMap\";import{createPathParser}from\"./pathUtils\";var defaultActionCreators=function defaultActionCreators(){return{};};export default(function(routeConfigs){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};validateRouteConfigMap(routeConfigs);var order=config.order||Object.keys(routeConfigs);var getCustomActionCreators=config.getCustomActionCreators||defaultActionCreators;var initialRouteParams=config.initialRouteParams;var initialRouteName=config.initialRouteName||order[0];var backBehavior=config.backBehavior||'none';var resetOnBlur=config.hasOwnProperty('resetOnBlur')?config.resetOnBlur:true;var initialRouteIndex=order.indexOf(initialRouteName);if(initialRouteIndex===-1){throw new Error(\"Invalid initialRouteName '\"+initialRouteName+\"'.\"+(\"Should be one of \"+order.map(function(n){return\"\\\"\"+n+\"\\\"\";}).join(', ')));}var childRouters={};order.forEach(function(routeName){childRouters[routeName]=null;var screen=getScreenForRouteName(routeConfigs,routeName);if(screen.router){childRouters[routeName]=screen.router;}});function getParamsForRoute(routeName,params){var routeConfig=routeConfigs[routeName];if(routeConfig&&routeConfig.params){return _objectSpread({},routeConfig.params,params);}else{return params;}}var _createPathParser=createPathParser(childRouters,routeConfigs,config),getPathAndParamsForRoute=_createPathParser.getPathAndParamsForRoute,_getActionForPathAndParams=_createPathParser.getActionForPathAndParams;function resetChildRoute(routeName){var initialParams=routeName===initialRouteName?initialRouteParams:undefined;var params=getParamsForRoute(routeName,initialParams);var childRouter=childRouters[routeName];if(childRouter){var childAction=NavigationActions.init();return _objectSpread({},childRouter.getStateForAction(childAction),{key:routeName,routeName:routeName,params:params});}return{key:routeName,routeName:routeName,params:params};}function getNextState(action,prevState,possibleNextState){function updateNextStateHistory(prevState,nextState){if(backBehavior!=='history'||prevState&&nextState&&nextState.index===prevState.index){return nextState;}var nextRouteKeyHistory=prevState?prevState.routeKeyHistory:[];if(action.type===NavigationActions.NAVIGATE){nextRouteKeyHistory=_toConsumableArray(nextRouteKeyHistory);var keyToAdd=nextState.routes[nextState.index].key;nextRouteKeyHistory=nextRouteKeyHistory.filter(function(k){return k!==keyToAdd;});nextRouteKeyHistory.push(keyToAdd);}else if(action.type===NavigationActions.BACK){nextRouteKeyHistory=_toConsumableArray(nextRouteKeyHistory);nextRouteKeyHistory.pop();}return _objectSpread({},nextState,{routeKeyHistory:nextRouteKeyHistory});}var nextState=possibleNextState;if(prevState&&possibleNextState&&prevState.index!==possibleNextState.index&&resetOnBlur){var prevRouteName=prevState.routes[prevState.index].routeName;var nextRoutes=_toConsumableArray(possibleNextState.routes);nextRoutes[prevState.index]=resetChildRoute(prevRouteName);nextState=_objectSpread({},possibleNextState,{routes:nextRoutes});}return updateNextStateHistory(prevState,nextState);}function getInitialState(){var routes=order.map(resetChildRoute);var initialState={routes:routes,index:initialRouteIndex,isTransitioning:false};if(backBehavior==='history'){var initialKey=routes[initialRouteIndex].key;initialState['routeKeyHistory']=[initialKey];}return initialState;}return{childRouters:childRouters,getActionCreators:function getActionCreators(route,stateKey){return getCustomActionCreators(route,stateKey);},getStateForAction:function getStateForAction(action,inputState){var prevState=inputState?_objectSpread({},inputState):inputState;var state=inputState||getInitialState();var activeChildIndex=state.index;if(action.type===NavigationActions.INIT){var params=action.params;if(params){state.routes=state.routes.map(function(route){return _objectSpread({},route,{params:_objectSpread({},route.params,params,route.routeName===initialRouteName?initialRouteParams:null)});});}}if(action.type===SwitchActions.JUMP_TO&&(action.key==null||action.key===state.key)){var _params=action.params;var index=state.routes.findIndex(function(route){return route.routeName===action.routeName;});if(index===-1){throw new Error(\"There is no route named '\"+action.routeName+\"' in the navigator with the key '\"+action.key+\"'.\\n\"+(\"Must be one of: \"+state.routes.map(function(route){return\"'\"+route.routeName+\"'\";}).join(',')));}return getNextState(action,prevState,_objectSpread({},state,{routes:_params?state.routes.map(function(route,i){return i===index?_objectSpread({},route,{params:_objectSpread({},route.params,_params)}):route;}):state.routes,index:index}));}var activeChildLastState=state.routes[state.index];var activeChildRouter=childRouters[order[state.index]];if(activeChildRouter){var activeChildState=activeChildRouter.getStateForAction(action,activeChildLastState);if(!activeChildState&&inputState){return null;}if(activeChildState&&activeChildState!==activeChildLastState){var routes=_toConsumableArray(state.routes);routes[state.index]=activeChildState;return getNextState(action,prevState,_objectSpread({},state,{routes:routes}));}}var isBackEligible=action.key==null||action.key===activeChildLastState.key;if(action.type===NavigationActions.BACK){if(isBackEligible&&backBehavior==='initialRoute'){activeChildIndex=initialRouteIndex;}else if(isBackEligible&&backBehavior==='order'){activeChildIndex=Math.max(0,activeChildIndex-1);}else if(isBackEligible&&backBehavior==='history'&&state.routeKeyHistory.length>1){var routeKey=state.routeKeyHistory[state.routeKeyHistory.length-2];activeChildIndex=order.indexOf(routeKey);}}var didNavigate=false;if(action.type===NavigationActions.NAVIGATE){didNavigate=!!order.find(function(childId,i){if(childId===action.routeName){activeChildIndex=i;return true;}return false;});if(didNavigate){var childState=state.routes[activeChildIndex];var childRouter=childRouters[action.routeName];var newChildState=childState;if(action.action&&childRouter){var childStateUpdate=childRouter.getStateForAction(action.action,childState);if(childStateUpdate){newChildState=childStateUpdate;}}if(action.params){newChildState=_objectSpread({},newChildState,{params:_objectSpread({},newChildState.params||{},action.params)});}if(newChildState!==childState){var _routes=_toConsumableArray(state.routes);_routes[activeChildIndex]=newChildState;var nextState=_objectSpread({},state,{routes:_routes,index:activeChildIndex});return getNextState(action,prevState,nextState);}else if(newChildState===childState&&state.index===activeChildIndex&&prevState){return null;}}}if(action.type===NavigationActions.SET_PARAMS){var key=action.key;var lastRoute=state.routes.find(function(route){return route.key===key;});if(lastRoute){var _params2=_objectSpread({},lastRoute.params,action.params);var _routes2=_toConsumableArray(state.routes);_routes2[state.routes.indexOf(lastRoute)]=_objectSpread({},lastRoute,{params:_params2});return getNextState(action,prevState,_objectSpread({},state,{routes:_routes2}));}}if(activeChildIndex!==state.index){return getNextState(action,prevState,_objectSpread({},state,{index:activeChildIndex}));}else if(didNavigate&&!inputState){return state;}else if(didNavigate){return _objectSpread({},state);}var isActionBackOrPop=action.type===NavigationActions.BACK||action.type===StackActions.POP||action.type===StackActions.POP_TO_TOP;var sendActionToInactiveChildren=!isActionBackOrPop||action.type===NavigationActions.BACK&&action.key!=null;if(sendActionToInactiveChildren){var _index=state.index;var _routes3=state.routes;order.find(function(childId,i){var childRouter=childRouters[childId];if(i===_index){return false;}var childState=_routes3[i];if(childRouter){childState=childRouter.getStateForAction(action,childState);}if(!childState){_index=i;return true;}if(childState!==_routes3[i]){_routes3=_toConsumableArray(_routes3);_routes3[i]=childState;_index=i;return true;}return false;});if(action.preserveFocus){_index=state.index;}if(_index!==state.index||_routes3!==state.routes){return getNextState(action,prevState,_objectSpread({},state,{index:_index,routes:_routes3}));}}return state;},getComponentForState:function getComponentForState(state){var routeName=state.routes[state.index].routeName;invariant(routeName,\"There is no route defined for index \"+state.index+\". Check that\\n        that you passed in a navigation state with a valid tab/screen index.\");var childRouter=childRouters[routeName];if(childRouter){return childRouter.getComponentForState(state.routes[state.index]);}return getScreenForRouteName(routeConfigs,routeName);},getComponentForRouteName:function getComponentForRouteName(routeName){return getScreenForRouteName(routeConfigs,routeName);},getPathAndParamsForState:function getPathAndParamsForState(state){var route=state.routes[state.index];return getPathAndParamsForRoute(route);},getActionForPathAndParams:function getActionForPathAndParams(path,params){return _getActionForPathAndParams(path,params);},getScreenOptions:createConfigGetter(routeConfigs,config.defaultNavigationOptions)};});","map":{"version":3,"sources":["SwitchRouter.js"],"names":["defaultActionCreators","config","validateRouteConfigMap","order","Object","getCustomActionCreators","initialRouteParams","initialRouteName","backBehavior","resetOnBlur","initialRouteIndex","childRouters","screen","getScreenForRouteName","routeConfig","routeConfigs","getPathAndParamsForRoute","getActionForPathAndParams","createPathParser","initialParams","routeName","params","getParamsForRoute","childRouter","childAction","NavigationActions","key","prevState","nextState","nextRouteKeyHistory","action","keyToAdd","k","routeKeyHistory","possibleNextState","prevRouteName","nextRoutes","resetChildRoute","routes","updateNextStateHistory","initialState","index","isTransitioning","initialKey","getActionCreators","getStateForAction","inputState","state","getInitialState","activeChildIndex","route","SwitchActions","getNextState","i","activeChildLastState","activeChildRouter","activeChildState","isBackEligible","Math","routeKey","didNavigate","childId","childState","newChildState","childStateUpdate","lastRoute","isActionBackOrPop","StackActions","sendActionToInactiveChildren","getComponentForState","invariant","getComponentForRouteName","getPathAndParamsForState","getScreenOptions","createConfigGetter"],"mappings":"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","sourcesContent":["import invariant from '../utils/invariant';\nimport getScreenForRouteName from './getScreenForRouteName';\nimport createConfigGetter from './createConfigGetter';\n\nimport * as NavigationActions from '../NavigationActions';\nimport * as SwitchActions from './SwitchActions';\nimport * as StackActions from './StackActions';\nimport validateRouteConfigMap from './validateRouteConfigMap';\nimport { createPathParser } from './pathUtils';\n\nconst defaultActionCreators = () => ({});\n\nexport default (routeConfigs, config = {}) => {\n  // Fail fast on invalid route definitions\n  validateRouteConfigMap(routeConfigs);\n\n  const order = config.order || Object.keys(routeConfigs);\n\n  const getCustomActionCreators =\n    config.getCustomActionCreators || defaultActionCreators;\n\n  const initialRouteParams = config.initialRouteParams;\n  const initialRouteName = config.initialRouteName || order[0];\n  const backBehavior = config.backBehavior || 'none';\n  const resetOnBlur = config.hasOwnProperty('resetOnBlur')\n    ? config.resetOnBlur\n    : true;\n\n  const initialRouteIndex = order.indexOf(initialRouteName);\n  if (initialRouteIndex === -1) {\n    throw new Error(\n      `Invalid initialRouteName '${initialRouteName}'.` +\n        `Should be one of ${order.map(n => `\"${n}\"`).join(', ')}`\n    );\n  }\n\n  const childRouters = {};\n  order.forEach(routeName => {\n    childRouters[routeName] = null;\n    const screen = getScreenForRouteName(routeConfigs, routeName);\n    if (screen.router) {\n      childRouters[routeName] = screen.router;\n    }\n  });\n\n  function getParamsForRoute(routeName, params) {\n    let routeConfig = routeConfigs[routeName];\n    if (routeConfig && routeConfig.params) {\n      return { ...routeConfig.params, ...params };\n    } else {\n      return params;\n    }\n  }\n\n  const {\n    getPathAndParamsForRoute,\n    getActionForPathAndParams,\n  } = createPathParser(childRouters, routeConfigs, config);\n\n  function resetChildRoute(routeName) {\n    let initialParams =\n      routeName === initialRouteName ? initialRouteParams : undefined;\n    // note(brentvatne): merging initialRouteParams *on top* of default params\n    // on the route seems incorrect but it's consistent with existing behavior\n    // in stackrouter\n    let params = getParamsForRoute(routeName, initialParams);\n    const childRouter = childRouters[routeName];\n    if (childRouter) {\n      const childAction = NavigationActions.init();\n      return {\n        ...childRouter.getStateForAction(childAction),\n        key: routeName,\n        routeName,\n        params,\n      };\n    }\n    return {\n      key: routeName,\n      routeName,\n      params,\n    };\n  }\n\n  function getNextState(action, prevState, possibleNextState) {\n    function updateNextStateHistory(prevState, nextState) {\n      if (\n        backBehavior !== 'history' ||\n        (prevState && nextState && nextState.index === prevState.index)\n      ) {\n        return nextState;\n      }\n      let nextRouteKeyHistory = prevState ? prevState.routeKeyHistory : [];\n      if (action.type === NavigationActions.NAVIGATE) {\n        nextRouteKeyHistory = [...nextRouteKeyHistory]; // copy\n        const keyToAdd = nextState.routes[nextState.index].key;\n        nextRouteKeyHistory = nextRouteKeyHistory.filter(k => k !== keyToAdd); // dedup\n        nextRouteKeyHistory.push(keyToAdd);\n      } else if (action.type === NavigationActions.BACK) {\n        nextRouteKeyHistory = [...nextRouteKeyHistory]; // copy\n        nextRouteKeyHistory.pop();\n      }\n      return {\n        ...nextState,\n        routeKeyHistory: nextRouteKeyHistory,\n      };\n    }\n\n    let nextState = possibleNextState;\n    if (\n      prevState &&\n      possibleNextState &&\n      prevState.index !== possibleNextState.index &&\n      resetOnBlur\n    ) {\n      const prevRouteName = prevState.routes[prevState.index].routeName;\n      const nextRoutes = [...possibleNextState.routes];\n      nextRoutes[prevState.index] = resetChildRoute(prevRouteName);\n      nextState = {\n        ...possibleNextState,\n        routes: nextRoutes,\n      };\n    }\n    return updateNextStateHistory(prevState, nextState);\n  }\n\n  function getInitialState() {\n    const routes = order.map(resetChildRoute);\n    const initialState = {\n      routes,\n      index: initialRouteIndex,\n      isTransitioning: false,\n    };\n    if (backBehavior === 'history') {\n      const initialKey = routes[initialRouteIndex].key;\n      initialState['routeKeyHistory'] = [initialKey];\n    }\n    return initialState;\n  }\n\n  return {\n    childRouters,\n\n    getActionCreators(route, stateKey) {\n      return getCustomActionCreators(route, stateKey);\n    },\n\n    getStateForAction(action, inputState) {\n      let prevState = inputState ? { ...inputState } : inputState;\n      let state = inputState || getInitialState();\n      let activeChildIndex = state.index;\n\n      if (action.type === NavigationActions.INIT) {\n        // NOTE(brentvatne): this seems weird... why are we merging these\n        // params into child routes?\n        // ---------------------------------------------------------------\n        // Merge any params from the action into all the child routes\n        const { params } = action;\n        if (params) {\n          state.routes = state.routes.map(route => ({\n            ...route,\n            params: {\n              ...route.params,\n              ...params,\n              ...(route.routeName === initialRouteName\n                ? initialRouteParams\n                : null),\n            },\n          }));\n        }\n      }\n\n      if (\n        action.type === SwitchActions.JUMP_TO &&\n        (action.key == null || action.key === state.key)\n      ) {\n        const { params } = action;\n        const index = state.routes.findIndex(\n          route => route.routeName === action.routeName\n        );\n\n        if (index === -1) {\n          throw new Error(\n            `There is no route named '${\n              action.routeName\n            }' in the navigator with the key '${action.key}'.\\n` +\n              `Must be one of: ${state.routes\n                .map(route => `'${route.routeName}'`)\n                .join(',')}`\n          );\n        }\n\n        return getNextState(action, prevState, {\n          ...state,\n          routes: params\n            ? state.routes.map((route, i) =>\n                i === index\n                  ? {\n                      ...route,\n                      params: {\n                        ...route.params,\n                        ...params,\n                      },\n                    }\n                  : route\n              )\n            : state.routes,\n          index,\n        });\n      }\n\n      // Let the current child handle it\n      const activeChildLastState = state.routes[state.index];\n      const activeChildRouter = childRouters[order[state.index]];\n      if (activeChildRouter) {\n        const activeChildState = activeChildRouter.getStateForAction(\n          action,\n          activeChildLastState\n        );\n        if (!activeChildState && inputState) {\n          return null;\n        }\n        if (activeChildState && activeChildState !== activeChildLastState) {\n          const routes = [...state.routes];\n          routes[state.index] = activeChildState;\n          return getNextState(action, prevState, {\n            ...state,\n            routes,\n          });\n        }\n      }\n\n      // Handle tab changing. Do this after letting the current tab try to\n      // handle the action, to allow inner children to change first\n      const isBackEligible =\n        action.key == null || action.key === activeChildLastState.key;\n      if (action.type === NavigationActions.BACK) {\n        if (isBackEligible && backBehavior === 'initialRoute') {\n          activeChildIndex = initialRouteIndex;\n        } else if (isBackEligible && backBehavior === 'order') {\n          activeChildIndex = Math.max(0, activeChildIndex - 1);\n        }\n        // The history contains current route, so we can only go back\n        // if there is more than one item in the history\n        else if (\n          isBackEligible &&\n          backBehavior === 'history' &&\n          state.routeKeyHistory.length > 1\n        ) {\n          const routeKey =\n            state.routeKeyHistory[state.routeKeyHistory.length - 2];\n          activeChildIndex = order.indexOf(routeKey);\n        }\n      }\n\n      let didNavigate = false;\n      if (action.type === NavigationActions.NAVIGATE) {\n        didNavigate = !!order.find((childId, i) => {\n          if (childId === action.routeName) {\n            activeChildIndex = i;\n            return true;\n          }\n          return false;\n        });\n        if (didNavigate) {\n          const childState = state.routes[activeChildIndex];\n          const childRouter = childRouters[action.routeName];\n          let newChildState = childState;\n\n          if (action.action && childRouter) {\n            const childStateUpdate = childRouter.getStateForAction(\n              action.action,\n              childState\n            );\n            if (childStateUpdate) {\n              newChildState = childStateUpdate;\n            }\n          }\n\n          if (action.params) {\n            newChildState = {\n              ...newChildState,\n              params: {\n                ...(newChildState.params || {}),\n                ...action.params,\n              },\n            };\n          }\n\n          if (newChildState !== childState) {\n            const routes = [...state.routes];\n            routes[activeChildIndex] = newChildState;\n            const nextState = {\n              ...state,\n              routes,\n              index: activeChildIndex,\n            };\n            return getNextState(action, prevState, nextState);\n          } else if (\n            newChildState === childState &&\n            state.index === activeChildIndex &&\n            prevState\n          ) {\n            return null;\n          }\n        }\n      }\n\n      if (action.type === NavigationActions.SET_PARAMS) {\n        const key = action.key;\n        const lastRoute = state.routes.find(route => route.key === key);\n        if (lastRoute) {\n          const params = {\n            ...lastRoute.params,\n            ...action.params,\n          };\n          const routes = [...state.routes];\n          routes[state.routes.indexOf(lastRoute)] = {\n            ...lastRoute,\n            params,\n          };\n          return getNextState(action, prevState, {\n            ...state,\n            routes,\n          });\n        }\n      }\n\n      if (activeChildIndex !== state.index) {\n        return getNextState(action, prevState, {\n          ...state,\n          index: activeChildIndex,\n        });\n      } else if (didNavigate && !inputState) {\n        return state;\n      } else if (didNavigate) {\n        return { ...state };\n      }\n\n      const isActionBackOrPop =\n        action.type === NavigationActions.BACK ||\n        action.type === StackActions.POP ||\n        action.type === StackActions.POP_TO_TOP;\n      const sendActionToInactiveChildren =\n        !isActionBackOrPop ||\n        (action.type === NavigationActions.BACK && action.key != null);\n\n      // Let other children handle it and switch to the first child that returns a new state\n      // Do not do this for StackActions.POP or NavigationActions.BACK actions without a key:\n      // it would be unintuitive for these actions to switch to another tab just because that tab had a Stack that could accept a back action\n      if (sendActionToInactiveChildren) {\n        let index = state.index;\n        let routes = state.routes;\n        order.find((childId, i) => {\n          const childRouter = childRouters[childId];\n          if (i === index) {\n            return false;\n          }\n          let childState = routes[i];\n          if (childRouter) {\n            childState = childRouter.getStateForAction(action, childState);\n          }\n          if (!childState) {\n            index = i;\n            return true;\n          }\n          if (childState !== routes[i]) {\n            routes = [...routes];\n            routes[i] = childState;\n            index = i;\n            return true;\n          }\n          return false;\n        });\n\n        // Nested routers can be updated after switching children with actions such as SET_PARAMS\n        // and COMPLETE_TRANSITION.\n        if (action.preserveFocus) {\n          index = state.index;\n        }\n\n        if (index !== state.index || routes !== state.routes) {\n          return getNextState(action, prevState, {\n            ...state,\n            index,\n            routes,\n          });\n        }\n      }\n\n      return state;\n    },\n\n    getComponentForState(state) {\n      const routeName = state.routes[state.index].routeName;\n      invariant(\n        routeName,\n        `There is no route defined for index ${state.index}. Check that\n        that you passed in a navigation state with a valid tab/screen index.`\n      );\n      const childRouter = childRouters[routeName];\n      if (childRouter) {\n        return childRouter.getComponentForState(state.routes[state.index]);\n      }\n      return getScreenForRouteName(routeConfigs, routeName);\n    },\n\n    getComponentForRouteName(routeName) {\n      return getScreenForRouteName(routeConfigs, routeName);\n    },\n\n    getPathAndParamsForState(state) {\n      const route = state.routes[state.index];\n      return getPathAndParamsForRoute(route);\n    },\n\n    getActionForPathAndParams(path, params) {\n      return getActionForPathAndParams(path, params);\n    },\n\n    getScreenOptions: createConfigGetter(\n      routeConfigs,\n      config.defaultNavigationOptions\n    ),\n  };\n};\n"]},"metadata":{},"sourceType":"module"}