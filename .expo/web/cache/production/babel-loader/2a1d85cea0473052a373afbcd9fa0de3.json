{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import Alert from\"react-native-web/dist/exports/Alert\";import AppRegistry from\"react-native-web/dist/exports/AppRegistry\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{numberWithCommas}from\"../common\";var PieChart=function(_React$Component){_inherits(PieChart,_React$Component);function PieChart(props){var _this;_classCallCheck(this,PieChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(PieChart).call(this,props));_this.drawPie=_this.drawPie.bind(_assertThisInitialized(_this));_this.initData=_this.initData.bind(_assertThisInitialized(_this));_this.handleEvent=_this.handleEvent.bind(_assertThisInitialized(_this));_this.state={pieSize:[],piePos:[],oldPiePos:[],pieIndex:[],dataSum:0,currentPieIdx:-1,evtX:0,evtY:0,selectedIndex:-1,labels:[],colors:[]};return _this;}_createClass(PieChart,[{key:\"componentDidMount\",value:function componentDidMount(){this.initData(this.props.data);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.data!==this.props.data){this.initData(nextProps.data);}}},{key:\"initData\",value:function initData(data){var colors=[];var labels=[];if(data[0].color){for(var i=0;i<data.length;i++){colors[i]=data[i].color;}}else{for(var _i=0;_i<data.length;_i++){colors[_i]=this.props.colors[_i%this.props.colors.length];}if(data.length===this.props.colors.length+1){colors[data.length-1]=this.props.colors[3];}}if(data[0].label){for(var _i2=0;_i2<data.length;_i2++){labels[_i2]=data[_i2].label;}}else{for(var _i3=0;_i3<data.length;_i3++){labels[_i3]=null;}}var sum=0;for(var _i4=0;_i4<data.length;_i4++){sum+=data[_i4].value;}var pieSize=[];var pieIndex=[];var angles=[];var index=0;var tempAngle=0;for(var _i5=0;_i5<data.length;_i5++){var angle=Math.round(data[_i5].value/sum*360);angles.push(tempAngle+angle);tempAngle=tempAngle+angle;if(data[_i5].value/sum*2*Math.PI>Math.PI){pieIndex.push(index);pieIndex.push(index);pieSize.push(Math.PI);pieSize.push(data[_i5].value/sum*2*Math.PI-Math.PI);}else{pieIndex.push(index);pieSize.push(data[_i5].value/sum*2*Math.PI);}index++;}var piePos=[];piePos[0]=0;for(var _i6=1;_i6<pieSize.length;_i6++){piePos[_i6]=piePos[_i6-1]+pieSize[_i6-1];}var oldPiePos=[];for(var _i7=0;_i7<this.props.data.length;_i7++){oldPiePos[_i7]=-1;}for(var _i8=0;_i8<piePos.length;_i8++){if(oldPiePos[pieIndex[_i8]]===-1){oldPiePos[pieIndex[_i8]]=piePos[_i8];}}this.setState({labels:labels,colors:colors,pieSize:pieSize,piePos:piePos,selectedIndex:-1,pieIndex:pieIndex,angles:angles,dataSum:sum,oldPiePos:oldPiePos});}},{key:\"handleEventOld\",value:function handleEventOld(evt){var _this2=this;var pageX=evt.nativeEvent.pageX;var pageY=evt.nativeEvent.pageY;var angles=this.state.angles;var size=this.props.size;this.refs.test.measure(function(fx,fy,width,height,px,py){var evtX=pageX-px;var evtY=pageY-py;var originX=pageX-px-size/2;var originY=size/2-(pageY-py);var rSquare=Math.pow(originX,2)+Math.pow(originY,2);var dx=originX;var dy=-1*originY;var rad=Math.atan2(dy,dx);var degree=rad*180/Math.PI;if(degree<0)degree=360+degree;var inPie=rSquare<Math.pow(size/2,2);var selectedIndex=-1;if(inPie){for(var i=0;i<angles.length;i++){if(degree<angles[i]){selectedIndex=i;break;}}}_this2.setState({evtX:evtX,evtY:evtY,originX:originX,originY:originY,inPie:inPie,selectedAngle:degree,selectedRad:rad,selectedIndex:selectedIndex});});}},{key:\"handleEvent\",value:function handleEvent(idx){this.setState({currentPieIdx:this.state.pieIndex[idx]});}},{key:\"handleEventBak\",value:function handleEventBak(evt,idx){var _this3=this;var pageX=evt.nativeEvent.pageX;var pageY=evt.nativeEvent.pageY;this.setState({currentPieIdx:idx});this.refs.test.measure(function(fx,fy,width,height,px,py){_this3.setState({evtX:pageX-px,evtY:pageY-py});});}},{key:\"drawInfoOld\",value:function drawInfoOld(x,y){var size=this.props.size;var dist=Math.pow(Math.pow(x,2)+Math.pow(y,2),0.5);if(dist<=size){var index=-1;var pos=x>0?Math.PI/2-Math.asin(y/dist):Math.PI*3/2+Math.asin(y/dist);for(var i=0;i<this.state.piePos.length;i++){if(this.state.piePos[i]>pos)break;index++;}var marginLeft=x;var marginTop=-y;return React.createElement(View,{style:{width:100,height:80,marginLeft:marginLeft,marginTop:marginTop}},React.createElement(Text,null,Math.round(this.state.pieSize[index]/(2*Math.PI)*10000)/100+'\\n'+this.state.value[index],\" \"));}}},{key:\"drawInfoT\",value:function drawInfoT(index){var size=this.props.size;var pos=(this.state.oldPiePos[index]+this.state.oldPiePos[(index+1)%this.state.oldPiePos.length])/2;if(index+1===this.props.data.length){pos+=Math.PI;}var x=size/4*Math.cos(-pos)+size/2;var y=-size/4*Math.sin(-pos)+size/2;if(index!==-1){var percentage=Math.round(this.props.data[index].value*1000/this.state.dataSum)/10+'%';var valueStr=numberWithCommas(this.props.data[index].value,false);return React.createElement(View,{style:{height:size}},React.createElement(View,{style:{marginLeft:x-60,marginTop:y-40,borderWidth:1,borderRadius:5,padding:5,borderColor:'#e0e0e0',backgroundColor:'#FFFFFF'}},React.createElement(View,{style:{flexDirection:'row',paddingLeft:5,alignItems:'center'}},React.createElement(View,{style:{width:10,height:5,marginRight:3,borderRadius:2,backgroundColor:this.state.colors[index]}}),React.createElement(Text,{style:styles.tooltipTitle},this.state.labels[index]?this.state.labels[index]:valueStr)),React.createElement(Text,{style:styles.tooltipValue},this.state.labels[index]?valueStr+\" (\"+percentage+\")\":percentage)));}}},{key:\"drawInfo\",value:function drawInfo(index,x,y){var size=this.props.size;if(index!==-1){return React.createElement(View,{style:{width:size,height:size}},React.createElement(View,{style:{width:60,height:80,marginLeft:x-30,marginTop:y-40,borderWidth:2,borderRadius:5,borderColor:'#e0e0e0',backgroundColor:'#FFFFFF'}},this.state.labels[index]!==null&&React.createElement(Text,null,this.state.labels[index]),React.createElement(View,{style:{flexDirection:'row',paddingLeft:5,alignItems:'center'}},React.createElement(View,{style:{width:10,height:5,marginRight:3,borderRadius:2,backgroundColor:this.state.colors[index]}}),React.createElement(Text,{style:styles.tooltipValue},this.props.data[index].value)),React.createElement(Text,{style:styles.tooltipValue},this.props.data[index].value*100/this.state.dataSum+'%')));}}},{key:\"getTransform\",value:function getTransform(rad,width){var add=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var x=(0-width/2)*Math.cos(rad)-(0-width/2)*Math.sin(rad);var y=(0-width/2)*Math.sin(rad)+(0-width/2)*Math.cos(rad);return[{translateX:-1*x-width/2+add},{translateY:-1*y-width/2},{rotate:rad+'rad'}];}},{key:\"drawPie\",value:function drawPie(angle,color,big,idx){var size=this.props.size;return React.createElement(View,null,angle===0?React.createElement(View,null):angle>1/2*Math.PI?React.createElement(View,null,React.createElement(View,{style:{width:size,height:size/2}}),React.createElement(View,{style:{flexDirection:'row',backgroundColor:'transparent'}},React.createElement(View,{style:{width:size/2,height:size/2,transform:this.getTransform(Math.PI/2,size/2,size/2)}},React.createElement(View,{style:{}},this.drawPie(angle-1/2*Math.PI,color,false,idx))),React.createElement(View,{style:{opacity:1,width:size/2,height:size/2}},this.drawPie(1/2*Math.PI,color,false,idx)))):big?React.createElement(View,{style:{width:size,height:size}},React.createElement(View,{style:{width:size,height:size/2}}),React.createElement(View,{style:{flexDirection:'row'}},React.createElement(View,{style:{width:size/2,height:size/2}}),React.createElement(View,{style:{width:size/2,height:size/2}},React.createElement(View,{style:{width:size/2,height:size/2,borderBottomRightRadius:size/2,backgroundColor:color,transform:this.getTransform(angle-Math.PI/2,size/2)}})))):React.createElement(View,{style:{width:size/2,height:size/2}},React.createElement(View,{style:{width:size/2,height:size/2}},React.createElement(View,{style:{width:size/2,height:size/2,borderBottomRightRadius:size/2,backgroundColor:color,borderWidth:0,borderColor:color,transform:this.getTransform(angle-Math.PI/2,size/2)}}))));}},{key:\"drawT\",value:function drawT(){var pies=[];if(this.state.pieSize.length===0)return null;for(var i=0;i<this.state.pieSize.length;i++){pies.push(React.createElement(View,{key:\"t\"+i,style:{transform:[{rotate:this.state.piePos[i]+\"rad\"}],position:'absolute'}},this.drawPie(this.state.pieSize[i],this.state.colors[this.state.pieIndex[i]],true,i)));}return pies;}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,selectedIndex=_this$state.selectedIndex,locationX=_this$state.locationX,locationY=_this$state.locationY,evtX=_this$state.evtX,evtY=_this$state.evtY,inPie=_this$state.inPie,selectedAngle=_this$state.selectedAngle,pieSize=_this$state.pieSize,angles=_this$state.angles;var size=this.props.size;return React.createElement(View,{collapsable:false},React.createElement(TouchableWithoutFeedback,{onPress:function onPress(e){_this4.handleEventOld(e);}},React.createElement(View,{ref:\"test\",style:StyleSheet.flatten([styles.container,{width:size,height:size}])},this.drawT(),this.drawInfoT(this.state.selectedIndex))));}}]);return PieChart;}(React.Component);PieChart.defaultProps={data:[{value:10},{value:20},{value:40},{value:100}],colors:['#009ef2','#ff4d7d','#00c4c3','#ffd12f','#e7e9ed'],size:200};var styles=StyleSheet.create({container:{overflow:'hidden',marginLeft:0,alignItems:'center',justifyContent:'center'},tooltipTitle:{fontSize:18,fontWeight:'bold'},tooltipValue:{fontSize:15,marginTop:5}});export default PieChart;","map":{"version":3,"sources":["/home/op-pro/Desktop/Finalyear project/Admin/node_modules/react-native-pure-chart/examples/pure-chart/components/pie-chart.js"],"names":["React","Component","numberWithCommas","PieChart","props","drawPie","bind","initData","handleEvent","state","pieSize","piePos","oldPiePos","pieIndex","dataSum","currentPieIdx","evtX","evtY","selectedIndex","labels","colors","data","nextProps","color","i","length","label","sum","value","angles","index","tempAngle","angle","Math","round","push","PI","setState","evt","pageX","nativeEvent","pageY","size","refs","test","measure","fx","fy","width","height","px","py","originX","originY","rSquare","pow","dx","dy","rad","atan2","degree","inPie","selectedAngle","selectedRad","idx","x","y","dist","pos","asin","marginLeft","marginTop","cos","sin","percentage","valueStr","borderWidth","borderRadius","padding","borderColor","backgroundColor","flexDirection","paddingLeft","alignItems","marginRight","styles","tooltipTitle","tooltipValue","add","translateX","translateY","rotate","big","transform","getTransform","opacity","borderBottomRightRadius","pies","position","locationX","locationY","e","handleEventOld","StyleSheet","flatten","container","drawT","drawInfoT","defaultProps","create","overflow","justifyContent","fontSize","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Alert, AppRegistry, StyleSheet, View, Text, TouchableWithoutFeedback, TouchableOpacity } from 'react-native'\nimport { numberWithCommas } from '../common'\n\nclass PieChart extends React.Component {\n  constructor (props) {\n    super(props)\n    this.drawPie = this.drawPie.bind(this)\n    this.initData = this.initData.bind(this)\n    this.handleEvent = this.handleEvent.bind(this)\n    this.state = {\n      // pieSize[i] : size of ith pie, piePos[i] : starting position of ith pie;\n      pieSize: [],\n      piePos: [],\n      oldPiePos: [],\n      pieIndex: [],\n      dataSum: 0,\n      currentPieIdx: -1,\n      evtX: 0,\n      evtY: 0,\n      selectedIndex: -1,\n      labels: [],\n      colors: []\n    }\n  }\n  // initData!!\n  componentDidMount () {\n    this.initData(this.props.data)\n  }\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.data !== this.props.data) {\n      this.initData(nextProps.data)\n    }\n  }\n  // initialize data\n  initData (data) {\n    let colors = []\n    let labels = []\n    if (data[0].color) {\n      for (let i = 0; i < data.length; i++) {\n        colors[i] = data[i].color\n      }\n    } else {\n      for (let i = 0; i < data.length; i++) {\n        colors[i] = this.props.colors[i % this.props.colors.length]\n      }\n      if (data.length === this.props.colors.length + 1) {\n        // 임의로 3으로 지정함 바꿔도 무방\n        colors[data.length - 1] = this.props.colors[3]\n      }\n    }\n\n    if (data[0].label) {\n      for (let i = 0; i < data.length; i++) {\n        labels[i] = data[i].label\n      }\n    } else {\n      for (let i = 0; i < data.length; i++) {\n        labels[i] = null\n      }\n    }\n\n    // validation\n    let sum = 0\n    for (let i = 0; i < data.length; i++) {\n      sum += data[i].value\n    }\n    // pieSize에는 각각 라디안값이 들어감\n    let pieSize = []\n    let pieIndex = []\n    let angles = []\n    let index = 0\n    let tempAngle = 0\n    for (let i = 0; i < data.length; i++) {\n      let angle = Math.round(data[i].value / sum * 360)\n      angles.push(tempAngle + angle)\n      tempAngle = tempAngle + angle\n      if (data[i].value / sum * 2 * Math.PI > Math.PI) {\n        pieIndex.push(index)\n        pieIndex.push(index)\n        pieSize.push(Math.PI)\n        pieSize.push(data[i].value / sum * 2 * Math.PI - Math.PI)\n      } else {\n        pieIndex.push(index)\n        pieSize.push(data[i].value / sum * 2 * Math.PI)\n      }\n      index++\n    }\n    // piePos에는 각각 시작위치가 라디안 값으로 들어감\n    let piePos = []\n    piePos[0] = 0\n    for (let i = 1; i < pieSize.length; i++) {\n      piePos[i] = piePos[i - 1] + pieSize[i - 1]\n    }\n\n    let oldPiePos = []\n    for (let i = 0; i < this.props.data.length; i++) {\n      oldPiePos[i] = -1\n    }\n    for (let i = 0; i < piePos.length; i++) {\n      if (oldPiePos[pieIndex[i]] === -1) {\n        oldPiePos[pieIndex[i]] = piePos[i]\n      }\n    }\n\n    /*\n    for (let i = 0; i < this.props.data.length; i++) {\n      console.log(oldPiePos[i])\n    }\n    */\n\n    /*\n    for (let i = 0; i < data.length; i++) {\n      console.log(data[i].value)\n      console.log(labels[i])\n      console.log(colors[i])\n    }\n    */\n\n    this.setState({\n      labels: labels,\n      colors: colors,\n      pieSize: pieSize,\n      piePos: piePos,\n      selectedIndex: -1,\n      pieIndex: pieIndex,\n      angles: angles,\n      dataSum: sum,\n      oldPiePos: oldPiePos\n    })\n  }\n  handleEventOld (evt) {\n    /* this.setState({\n      evtX: evt.nativeEvent.pageX,\n      evtY: evt.nativeEvent.pageY\n    }) */\n    let pageX = evt.nativeEvent.pageX\n    let pageY = evt.nativeEvent.pageY\n    const {angles} = this.state\n    const {size} = this.props\n    this.refs.test.measure((fx, fy, width, height, px, py) => {\n      let evtX = pageX - px\n      let evtY = (pageY - py)\n      let originX = pageX - px - size / 2\n      let originY = size / 2 - (pageY - py)\n      let rSquare = Math.pow(originX, 2) + Math.pow(originY, 2)\n      let dx = originX\n      let dy = -1 * originY\n      let rad = Math.atan2(dy, dx)\n      let degree = (rad * 180) / Math.PI\n      if (degree < 0) degree = 360 + degree\n      let inPie = rSquare < Math.pow(size / 2, 2)\n      let selectedIndex = -1\n      if (inPie) {\n        for (let i = 0; i < angles.length; i++) {\n          if (degree < angles[i]) {\n            selectedIndex = i\n            break\n          }\n        }\n      }\n\n      this.setState({\n        evtX: evtX,\n        evtY: evtY,\n        originX: originX,\n        originY: originY,\n        inPie: inPie,\n        selectedAngle: degree,\n        selectedRad: rad,\n        selectedIndex: selectedIndex\n      })\n    })\n  }\n\n  handleEvent (idx) {\n //   console.log(idx)\n    this.setState({\n      currentPieIdx: this.state.pieIndex[idx]\n    })\n  }\n  /*\n  handleEvent (a, b, c) {\n    console.log(a)\n    console.log(b)\n    console.log(c)\n  }\n  */\n\n  handleEventBak (evt, idx) {\n    /* this.setState({\n      evtX: evt.nativeEvent.pageX,\n      evtY: evt.nativeEvent.pageY\n    }) */\n\n    // console.log(idx)\n    let pageX = evt.nativeEvent.pageX\n    let pageY = evt.nativeEvent.pageY\n    this.setState({\n      currentPieIdx: idx\n    })\n    this.refs.test.measure((fx, fy, width, height, px, py) => {\n      this.setState({\n        evtX: pageX - px,\n        evtY: pageY - py\n\n      })\n    })\n  }\n  drawInfoOld (x, y) {\n    const {size} = this.props\n    let dist = Math.pow(Math.pow(x, 2) + Math.pow(y, 2), 0.5)\n    // console.log('x: ' + x + '  y: ' + y)\n    if (dist <= size) {\n      let index = -1\n      // 중심 y축 기준으로 오른쪽 왼쪽\n      let pos = x > 0 ? Math.PI / 2 - Math.asin(y / dist) : Math.PI * 3 / 2 + Math.asin(y / dist)\n      // index 값 정하기 piePos piePos 값보다 pos값이 작을 경우 멈춤\n      for (let i = 0; i < this.state.piePos.length; i++) {\n        if (this.state.piePos[i] > pos) break\n        index++\n      }\n      let marginLeft = x\n      let marginTop = -y\n\n      return (\n        <View style={{\n          width: 100,\n          height: 80,\n          marginLeft: marginLeft,\n          marginTop: marginTop\n        }} >\n          <Text>{Math.round(this.state.pieSize[index] / (2 * Math.PI) * 10000) / 100 + '\\n' + this.state.value[index]} </Text>\n        </View>\n      )\n    }\n  }\n\n  drawInfoT (index) {\n    const {size} = this.props\n\n    let pos = (this.state.oldPiePos[index] + this.state.oldPiePos[(index + 1) % this.state.oldPiePos.length]) / 2\n    if (index + 1 === this.props.data.length) {\n      pos += Math.PI\n    }\n    let x = size / 4 * Math.cos(-pos) + size / 2\n    let y = -size / 4 * Math.sin(-pos) + size / 2\n\n    if (index !== -1) {\n      let percentage = Math.round((this.props.data[index].value * 1000 / this.state.dataSum)) / 10 + '%'\n      let valueStr = numberWithCommas(this.props.data[index].value, false)\n      return (\n        <View style={{\n          height: size\n        }}>\n          <View style={{\n            marginLeft: x - 60,\n            marginTop: y - 40,\n            borderWidth: 1,\n            borderRadius: 5,\n            padding: 5,\n            borderColor: '#e0e0e0',\n            backgroundColor: '#FFFFFF'\n          }}>\n            <View style={{flexDirection: 'row', paddingLeft: 5, alignItems: 'center'}}>\n              <View style={{\n                width: 10,\n                height: 5,\n                marginRight: 3,\n                borderRadius: 2,\n                backgroundColor: this.state.colors[index]\n              }} />\n              <Text style={styles.tooltipTitle}>{this.state.labels[index] ? this.state.labels[index] : valueStr}</Text>\n            </View>\n\n            <Text style={styles.tooltipValue}>{this.state.labels[index] ? `${valueStr} (${percentage})` : percentage}</Text>\n\n          </View>\n        </View>\n      )\n    }\n  }\n  drawInfo (index, x, y) {\n    const {size} = this.props\n    if (index !== -1) {\n      return (\n        <View style={{\n          width: size,\n          height: size\n        }}>\n          <View style={{\n            width: 60,\n            height: 80,\n            marginLeft: x - 30,\n            marginTop: y - 40,\n            borderWidth: 2,\n            borderRadius: 5,\n            borderColor: '#e0e0e0',\n            backgroundColor: '#FFFFFF'\n          }}>\n\n            {this.state.labels[index] !== null &&\n              <Text>{this.state.labels[index]}</Text>\n            }\n            <View style={{flexDirection: 'row', paddingLeft: 5, alignItems: 'center'}}>\n              <View style={{\n                width: 10,\n                height: 5,\n                marginRight: 3,\n                borderRadius: 2,\n                backgroundColor: this.state.colors[index]\n              }} />\n              <Text style={styles.tooltipValue}>{this.props.data[index].value}</Text>\n            </View>\n\n            <Text style={styles.tooltipValue}>{this.props.data[index].value * 100 / this.state.dataSum + '%'}</Text>\n\n          </View>\n        </View>\n      )\n    }\n  }\n\n  getTransform (rad, width, add = 0) {\n    let x = (0 - width / 2) * Math.cos(rad) - (0 - width / 2) * Math.sin(rad)\n    let y = (0 - width / 2) * Math.sin(rad) + (0 - width / 2) * Math.cos(rad)\n\n    return [ {translateX: (-1 * x) - width / 2 + add}, { translateY: (-1 * y) - width / 2 }, { rotate: rad + 'rad' } ]\n  }\n  drawPie (angle, color, big, idx) {\n    const {size} = this.props\n    return (\n      <View>\n        {angle === 0 ? (\n          <View />\n        ) : (\n          angle > (1 / 2 * Math.PI) ? (\n            <View>\n              <View style={{width: size, height: size / 2}} />\n              <View style={{flexDirection: 'row', backgroundColor: 'transparent'}}>\n\n                <View style={{\n\n                  width: size / 2,\n                  height: size / 2,\n\n                  transform: this.getTransform(Math.PI / 2, size / 2, size / 2)\n                }}>\n\n                  <View style={{\n                  }}>\n                    {this.drawPie(angle - 1 / 2 * Math.PI, color, false, idx)}\n                  </View>\n\n                </View>\n\n                <View style={{\n                  opacity: 1,\n\n                  width: size / 2,\n                  height: size / 2\n                }}>\n                  {this.drawPie(1 / 2 * Math.PI, color, false, idx)}\n                </View>\n\n              </View>\n            </View>\n\n        ) : (\n          // big 사용이유\n          big ? (\n            <View style={{\n              width: size,\n              height: size\n            }}>\n              <View style={{width: size, height: size / 2}} />\n              <View style={{flexDirection: 'row'}}>\n                <View style={{width: size / 2, height: size / 2}} />\n                <View style={{\n                  width: size / 2,\n                  height: size / 2\n                }}>\n\n                  <View style={{\n                    width: size / 2,\n                    height: size / 2,\n                    borderBottomRightRadius: size / 2,\n                    backgroundColor: color,\n                    transform: this.getTransform(angle - Math.PI / 2, size / 2)\n                  }} />\n\n                </View>\n\n              </View>\n            </View>\n          ) : (\n            <View style={{\n              width: size / 2,\n              height: size / 2\n            }}>\n\n              <View style={{\n                width: size / 2,\n                height: size / 2\n              }}>\n\n                <View style={{\n                  width: size / 2,\n                  height: size / 2,\n                  borderBottomRightRadius: size / 2,\n                  backgroundColor: color,\n                  borderWidth: 0,\n                  borderColor: color,\n                  transform: this.getTransform(angle - Math.PI / 2, size / 2)\n                }} />\n\n              </View>\n\n            </View>\n          )\n        ))}\n      </View>\n    )\n  }\n  drawT () {\n    let pies = []\n    if (this.state.pieSize.length === 0) return null\n    for (let i = 0; i < this.state.pieSize.length; i++) {\n      pies.push(\n        <View key={`t${i}`} style={{\n          transform: [{rotate: `${this.state.piePos[i]}rad`}],\n          position: 'absolute'\n\n        }}>\n          {\n            this.drawPie(this.state.pieSize[i], this.state.colors[this.state.pieIndex[i]], true, i)\n          }\n        </View>\n        )\n    }\n    return (\n      pies\n    )\n  }\n  render () {\n    const {selectedIndex, locationX, locationY, evtX, evtY, inPie, selectedAngle,\n      pieSize, angles} = this.state\n    const {size} = this.props\n    return (\n      <View collapsable={false}>\n\n        <TouchableWithoutFeedback onPress={(e) => {\n          // const {locationX, locationY} = e.nativeEvent\n          // console.log(locationX, locationY)\n          // this.setState({locationX: locationX, locationY: locationY})\n          this.handleEventOld(e)\n        }}>\n\n          <View ref='test' style={StyleSheet.flatten([styles.container, {\n            width: size,\n            height: size\n          }])}>\n\n            {this.drawT()}\n            {this.drawInfoT(this.state.selectedIndex)}\n          </View>\n\n        </TouchableWithoutFeedback>\n      </View>\n    )\n  }\n}\n\nPieChart.defaultProps = {\n  data: [{value: 10}, {value: 20}, {value: 40}, {value: 100}],\n  colors: ['#009ef2', '#ff4d7d', '#00c4c3', '#ffd12f', '#e7e9ed'],\n  size: 200\n}\nconst styles = StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    marginLeft: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  tooltipTitle: {fontSize: 18, fontWeight: 'bold'},\n  tooltipValue: {fontSize: 15, marginTop: 5}\n})\n\nexport default PieChart\n"]},"metadata":{},"sourceType":"module"}