{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import*as firebase from'firebase';import React,{Component,useState}from'react';import Button from\"../components/Button\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Platform from\"react-native-web/dist/exports/Platform\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{TextBase}from\"react-native-web/dist/index\";import{Userloname}from\"./AuthLoadingScreen\";import{Userlo}from\"./AuthLoadingScreen\";import{ListItem,Overlay,Card}from'react-native-elements';import Background from\"../components/Background\";import Toast from'react-native-tiny-toast';var firebaseConfig={apiKey:\"AIzaSyDslHhZc8QSFrsonWJlsvBXBm3vesReV84\",authDomain:\"complaint-a4db2.firebaseapp.com\",databaseURL:\"https://complaint-a4db2.firebaseio.com\",projectId:\"complaint-a4db2\",storageBucket:\"complaint-a4db2.appspot.com\",messagingSenderId:\"966569668349\",appId:\"1:966569668349:web:24e2908bf9f3b5ffd6d894\",measurementId:\"G-VQXSNP4LCQ\"};if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}function onconfirm(user_id,Form_Id){var date=new Date().getDate();var month=new Date().getMonth()+1;var year=new Date().getFullYear();var hours=new Date().getHours();var min=new Date().getMinutes();var sec=new Date().getSeconds();cdate=date+'/'+month+'/'+year+' '+hours+':'+min+':'+sec;console.log(cdate);console.log(\"reolve issue is addeding in list\");firebase.database().ref('Resolved_issues/'+user_id+'/'+Form_Id+'/').set({DateTime:cdate});console.log(\"reolve issue is addeded in list\");console.log(\" issue is updated in list\");firebase.database().ref('Memberjobs/'+user_id).update({Job:\"NULL\"});console.log(\"display nameE:\"+Userloname());firebase.database().ref('Form/'+Form_Id).update({ZResolved_By:user_id,ZResolved_ByName:Userloname(),Status:\"True\"});Toast.showSuccess('Status Updated updated');console.log(\"Sucessful\");}function onresolvedPressed(id){var uid=Userlo();Alert.alert('Acknowledge','Conform that you have resolved the Issue rised by the user',[{text:'Cancel',onPress:function onPress(){return console.log('Cancel Pressed');},style:'cancel'},{text:'Confirm',onPress:function onPress(){return onconfirm(uid,id);},style:'cancel'}],{cancelable:false});}var ServiceConfermation=function(_Component){_inherits(ServiceConfermation,_Component);function ServiceConfermation(){var _this;_classCallCheck(this,ServiceConfermation);_this=_possibleConstructorReturn(this,_getPrototypeOf(ServiceConfermation).call(this));_this.state={data:[]};return _this;}_createClass(ServiceConfermation,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var uid=Userlo();firebase.database().ref('Memberjobs/'+uid).once('value',function(snapshot){var data=snapshot.val();console.log(\"\");console.log(\"Job:\",data.Job);var id=data.Job;if(id==\"NULL\"){Alert.alert(\"Message\",\"No Undertaken any Issues\\n please select the job from issues list menu\");}else{firebase.database().ref('Form/'+id).on('value',function(snapshot){var data1=snapshot.val();var items1=Object.values(data1);console.log(\"df\"+items1);for(var i=0;i<items1.length;i++){_this2.setState({data:[].concat(_toConsumableArray(_this2.state.data),[items1[i]])});}console.log(data1);});}});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(Background,{style:styles.container},this.state.data.length>0?React.createElement(Card,{title:'Form id '+this.state.data[3]},React.createElement(Text,null,\"Mail_Id     :\",this.state.data[4]),React.createElement(Text,null,\"Catagory    :\",this.state.data[0]),React.createElement(Text,null,\"System_Id   :\",this.state.data[6]),React.createElement(Text,null,\"Description :\"),React.createElement(Text,null,\"                 \",this.state.data[2]),React.createElement(Button,{mode:\"contained\",onPress:function onPress(){return onresolvedPressed(_this3.state.data[3]);}},\"Resolved\")):Toast.showSuccess('no datafound'));}}]);return ServiceConfermation;}(Component);export{ServiceConfermation as default};;var styles=StyleSheet.create({container:{},nodata:{fontSize:20,textAlign:\"center\",fontWeight:\"bold\",color:\"black\",padding:130}});","map":{"version":3,"sources":["/home/op-pro/Desktop/Finalyear project/Admin/src/screens/ServiceConfermation.js"],"names":["firebase","React","Component","useState","Button","TextBase","Userloname","Userlo","ListItem","Overlay","Card","Background","Toast","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","onconfirm","user_id","Form_Id","date","Date","getDate","month","getMonth","year","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","cdate","console","log","database","ref","set","DateTime","update","Job","ZResolved_By","ZResolved_ByName","Status","showSuccess","onresolvedPressed","id","uid","Alert","alert","text","onPress","style","cancelable","ServiceConfermation","state","data","once","snapshot","val","on","data1","items1","Object","values","i","setState","styles","container","StyleSheet","create","nodata","fontSize","textAlign","fontWeight","color","padding"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\nimport React, { Component,useState } from 'react';\nimport Button from \"../components/Button\";\nimport { TouchableOpacity,Alert, StyleSheet, Text, View,FlatList,Platform,ScrollView, TextBase} from \"react-native\";\n// Optionally import the services that you want to use\n//import \"firebase/auth\";\n//import \"firebase/database\";\n//import \"firebase/firestore\";\n//import \"firebase/functions\";\n//import \"firebase/storage\";\nimport {Userloname} from \"./AuthLoadingScreen\";\nimport {Userlo} from \"./AuthLoadingScreen\";\nimport { ListItem,Overlay, Card } from 'react-native-elements'\nimport Background from '../components/Background';\nimport Toast from 'react-native-tiny-toast';\n\n\n// Initialize Firebase\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDslHhZc8QSFrsonWJlsvBXBm3vesReV84\",\n    authDomain: \"complaint-a4db2.firebaseapp.com\",\n    databaseURL: \"https://complaint-a4db2.firebaseio.com\",\n    projectId: \"complaint-a4db2\",\n    storageBucket: \"complaint-a4db2.appspot.com\",\n    messagingSenderId: \"966569668349\",\n    appId: \"1:966569668349:web:24e2908bf9f3b5ffd6d894\",\n    measurementId: \"G-VQXSNP4LCQ\"\n};\n\nif (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n}\n \nfunction onconfirm(user_id,Form_Id){\n  var date = new Date().getDate(); //Current Date\n    var month = new Date().getMonth() + 1; //Current Month\n    var year = new Date().getFullYear(); //Current Year\n    var hours = new Date().getHours(); //Current Hours\n    var min = new Date().getMinutes(); //Current Minutes\n    var sec = new Date().getSeconds(); //Current Seconds\n    cdate=date +'/' + month + '/' + year + ' ' + hours + ':' + min + ':' + sec\n    console.log(cdate)\n  console.log(\"reolve issue is addeding in list\")\n  firebase.database().ref('Resolved_issues/'+user_id+'/'+Form_Id+'/').set({\n    DateTime:cdate\n  });\n  console.log(\"reolve issue is addeded in list\")\n  console.log(\" issue is updated in list\")\n  firebase.database().ref('Memberjobs/'+user_id).update({\n    Job:\"NULL\",\n  });\n\n  console.log(\"display nameE:\"+Userloname());\n  \n  firebase.database().ref('Form/'+Form_Id).update({\n    ZResolved_By:user_id,\n    ZResolved_ByName:Userloname(),\n    Status: \"True\"\n  });\n  Toast.showSuccess('Status Updated updated')  \n  console.log(\"Sucessful\")\n\n}\n\nfunction onresolvedPressed(id){\n  \n  const uid=Userlo()\n    Alert.alert(\n      'Acknowledge',\n      'Conform that you have resolved the Issue rised by the user',\n      [\n        {\n          text: 'Cancel',\n          onPress: () => console.log('Cancel Pressed'),\n          style: 'cancel',\n        },\n        { text: 'Confirm', onPress: () => onconfirm(uid,id),style: 'cancel'},        \n      ],\n      { cancelable: false }\n    );\n}\nexport default class ServiceConfermation extends Component {  \n  constructor(){\n    super();\n    this.state={\n\n      data:[]\n    }\n    \n  }\n  \n  componentDidMount(){\n    const uid=Userlo()\n    firebase.database().ref('Memberjobs/'+uid).once('value', (snapshot)=> {\n      let data = snapshot.val();\n      console.log(\"\")\n  //   var items = JSON.parse(data);\n      console.log(\"Job:\",data.Job);\n      const id=data.Job\n      if (id==\"NULL\"){\n        Alert.alert(\n          \"Message\",\n          \"No Undertaken any Issues\\n please select the job from issues list menu\")\n      }\n      else{\n        firebase.database().ref('Form/'+id).on('value', (snapshot)=> {\n          let data1 = snapshot.val();\n          var items1 = Object.values(data1);\n          console.log(\"df\"+items1)\n         for(let i=0;i<items1.length;i++){\n            this.setState({\n              data:[...this.state.data,items1[i]],\n            })\n          }\n          console.log(data1);\n        }); \n      }\n     \n    });\n  }\n  \n  render(){\n    \n    return (\n\n    <Background  style={styles.container}>\n    {this.state.data.length > 0 ?\n    <Card title={'Form id '+this.state.data[3]}>\n\n    <Text>Mail_Id     :{this.state.data[4]}</Text>\n<Text>Catagory    :{this.state.data[0]}</Text>\n<Text>System_Id   :{this.state.data[6]}</Text>\n<Text>Description :</Text>\n<Text>                 {this.state.data[2]}</Text>\n<Button mode=\"contained\" onPress={()=>onresolvedPressed(this.state.data[3])}>\n        Resolved\n      </Button>\n    \n    </Card> :\n    Toast.showSuccess('no datafound')  \n\n    } \n  </Background>\n  );\n  } \n};\nconst styles = StyleSheet.create({\n  container: {\n  },\n  nodata:{\n    fontSize:20,\n    textAlign: \"center\",\n    fontWeight: \"bold\",\n    color: \"black\",\n    padding: 130\n\n  }\n});"]},"metadata":{},"sourceType":"module"}